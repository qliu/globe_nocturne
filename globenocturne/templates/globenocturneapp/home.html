{% load admin_static bootstrapped_goodies_tags %}
{% load leaflet_tags %}

<html>
    <head>
        {% leaflet_js %}
        <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
        {% leaflet_css %}
        <style>
          .leaflet-container {  /* all maps */
              width:  800px;
              height: 600px;
          }

          #specialbigmap {
              height: 800px;
          }
        </style>
    </head>

    <body>
        <h1>World Countries</h1>
        <!--
        {% leaflet_map "world_countries" callback="world_countries_map_init" %}
        -->
        <div id="map" class="leaflet-container"></div>
        
        <script type="text/javascript">
            //function world_countries_map_init(map,options){
                var mapCRS = L.CRS.EPSG4326;
                
                var map = L.map('map',{
                    center: [39.870808, -98.791620],
                    zoom:4,
                    //crs: mapCRS,
                    minZoom: 2,
                    maxZoom: 11,
                })
                                
                var baseLayer = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png',{
                    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
                });
                
                baseLayer.addTo(map);
                
                var wmsLayerDMSP = L.tileLayer.wms("http://mapserver.ngdc.noaa.gov/cgi-bin/public/gcv4/",{
                    version: '1.3.0',
                    format: 'image/png',
                    transparent: true,
                    layers: 'F182010.v4c_web.stable_lights.avg_vis.lzw.tif',
                    opacity: '0.6',
                    crs: mapCRS,
                }).addTo(map);
                           
                var dataurl = '{% url "worldborderdata" %}';
                $.getJSON(dataurl, function (data) {
                    L.geoJson(data).addTo(map);
                });       
                
            //}
        </script>
    </body>
</html>